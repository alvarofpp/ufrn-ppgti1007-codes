# DSL

## Grammar

```xtext
grammar org.ppgti.mydsl.MyDSL with org.eclipse.xtext.common.Terminals

generate myDSL "http://www.ppgti.org/mydsl/MyDSL"

Pessoas:
	baseDados += Pessoa*;
	
Pessoa:
	'Pessoa' nome=ID sobrenome=ID ';';
```

## Generator

```xtend
/*
 * generated by Xtext 2.25.0
 */
package org.ppgti.mydsl.generator

import org.eclipse.emf.ecore.resource.Resource
import org.eclipse.xtext.generator.AbstractGenerator
import org.eclipse.xtext.generator.IFileSystemAccess2
import org.eclipse.xtext.generator.IGeneratorContext
import org.ppgti.mydsl.myDSL.Pessoa

/**
 * Generates code from your model files on save.
 * 
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#code-generation
 */
class MyDSLGenerator extends AbstractGenerator {
	override void doGenerate(Resource resource, IFileSystemAccess2 fsa, IGeneratorContext context) {
		val pre = '''
		class Main {
			public static void main (String[] args) {
		'''
		
		val pos = '''
			}
		}
		'''
		
		fsa.generateFile('Main.java', pre + 
			resource.allContents
				.filter(Pessoa)
				.map[compile]
				.join('\n') + '\n' + pos)
	}
	
	private def compile(Pessoa p)'''
	System.out.println("Pessoa: «p.nome» «p.sobrenome»");
	'''
}
```

# Example

```
Pessoa Alvaro Ferreira ;

Pessoa Rebeka Ferraz ;
```

## Output

```java
class Main {
	public static void main (String[] args) {
System.out.println("Pessoa: Alvaro Ferreira");
System.out.println("Pessoa: Rebeka Ferraz");
	}
}
```
